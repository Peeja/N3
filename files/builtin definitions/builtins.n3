@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix math: <http://www.w3.org/2000/10/swap/math#> .
@prefix list: <http://www.w3.org/2000/10/swap/list#> .
@prefix string: <http://www.w3.org/2000/10/swap/string#> .
@prefix : <http://www.w3.org/2000/10/swap/builtin#> .
@base <http://www.w3.org/2000/10/swap/builtin#> .

:variable a :VariableTypeRestriction .
:resource a :ResourceTypeRestriction .
:numeric a :NumericTypeRestriction .
:string a :StringTypeRestriction .
:list a :ListTypeRestriction .
:regex a :RegexTypeRestriction .

:numericOrVariable :oneOf ( :numeric :variable ) .
:stringOrVariable :oneOf ( :string :variable ) .
:regexOrVariable :oneOf ( :regex :variable ) .
:resourceOrVariable :oneOf ( :resource :variable ) .
:listOrVariable :oneOf ( :list :variable ) .

:numericList a :ListTypeRestriction ; 
	:listElementType :numeric .
:numericOrVariableList a :ListTypeRestriction ; 
	:listElementType :numericOrVariable .
:stringList a :ListTypeRestriction ; 
	:listElementType :string .
:stringOrVariableList a :ListTypeRestriction ; 
	:listElementType :stringOrVariable .

:maxOneVar a :VariableTypeRestriction ;
	:cardinality [ a :Max ; rdf:value 1 ] .
	
math:greaterThan
	a :BuiltinDefinition ;
	:subject :numericOrVariable ;
	:object :numericOrVariable ;
	:requires [
		:subject :numeric ;
		:object :numeric 
	] .
	
math:sum
    a :BuiltinDefinition ;
    :subject 
		[ :oneOf ( :numericOrVariableList :variable ) ] ;
    :object :numericOrVariable ;
	:requires [ :oneOf ( [
			:subject :numericList ;
			:object :numericOrVariable
		] [
			:subject [ :listElementType [ :oneOf ( :maxOneVar :numeric ) ]] ;
			:object :numeric
		] ) ] .
	
math:difference
	a :BuiltinDefinition ;
	:subject [ :size [ a :Exact ; rdf:value 2 ] ; :listElementType :numericOrVariable ] ;
	:object :numericOrVariable ;
	:requires [ :oneOf ( [ 
		:subject :numericList ;
		:object :numericOrVariable
	] [
		:subject [ :listElementType [ :oneOf ( :maxOneVar :numeric ) ]] ;
		:object :numeric
	] ) ] .
	
math:absoluteValue
	a :BuiltinDefinition ;
	:subject :numericOrVariable;
	:object :numericOrVariable ;
	:requires [ :subject :numeric ; :object :numericOrVariable ] .
	
math:cos 
	a :BuiltinDefinition ;
	:subject :numericOrVariable;
	:object :numericOrVariable;
	:requires [ :oneOf ( [ 
		:subject :numeric ; :object :numericOrVariable 
	] [ 
		:subject :numericOrVariable ; :object :numeric 
	] ) ] .
	
string:scrape
	a :BuiltinDefinition ;
	:subject 
		[ :oneOf (
			[ :listElements ( :regexOrVariable :stringOrVariable ) ]
			:variable
		) ] ;
	:object :stringOrVariable ;
	:requires [
		:subject [ :listElements ( :regex :string ) ] ;
		:object :stringOrVariable
	] .
	
string:concatenation
	a :BuiltinDefinition ;
	:subject 
		[ :oneOf ( :stringOrVariableList :variable ) ] ;
	:object :stringOrVariable ;
	:requires [ 
		:subject :stringList ;
		:object :stringOrVariable
	] .
	
list:memberAt
	a :BuiltinDefinition ;
	:subject 
		[ :oneOf (
			[ :listElements ( :listOrVariable :numericOrVariable ) ]
			:variable 
		) ] ;
	:object :resourceOrVariable ;
	:requires [ :oneOf ( [
		:subject [ :listElements ( :list :numeric ) ] ;
		:object [ :oneOf ( :resource :variable ) ]
	] [
		:subject [ :listElements ( :list :numericOrVariable ) ] ;
		:object :resource
	] ) ] .